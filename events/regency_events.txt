namespace = regency

regency.001 = {
	type = character_event
	hidden = yes
	trigger = {
		has_government = feudal_government
		OR = {
			age < 16
			AND = {
				is_male = no
				OR = {
					has_realm_law = male_only_law #shouldn't happen
					has_realm_law = male_preference_law
				}
			}
			AND = {
				is_male = yes
				OR = {
					has_realm_law = female_only_law #shouldn't happen
					has_realm_law = female_preference_law
				}
			}
		}
	}
	immediate = {
		save_scope_as = invalid_ruler
		hidden_effect = {
			remove_character_flag = regent_assigned
			every_parent = {
				limit = {is_alive = yes}
				add_to_list = regent_candidates
			}
			every_vassal = {
				add_to_list = regent_candidates
			}
			every_coutier = {
				add_to_list = regent_candidates
			}
			random_in_list = {
				list = regent_candidates
				limit = {has_relation_guardian = scope:invalid_ruler}
				alternative_limit = {is_parent_of = scope:invalid_ruler}
				alternative_limit = {is_powerful_vassal_of = scope:invalid_ruler}
				alternative_limit = {is_vassal_of = scope:invalid_ruler}
				alternative_limit = {is_coutier_of = scope:invalid_ruler}
				add_character_flag = is_assigned_regent
				clear_variable_list = regent_assigned_to
				add_to_variable_list = {name = regent_assigned_to target = scope:invalid_ruler}
			}
			add_character_flag = regent_assigned
		}
	}
}
regency.002 = {
	type = character_event
	hidden = yes
	immediate = {
		hidden_effect = {
			every_in_list = {
				variable = regent_assigned_to
				trigger_event = regency.001
			}
		}
	}
}